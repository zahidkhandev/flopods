# Flopods: AI Workflow Canvas - Codebase Export

**Project:** AI Workflow Canvas - Multi-LLM Node-Based Platform
**Author:** Zahid Khan
**Generated:** 2025-10-26 16:17:37 IST
**Version:** 0.0.1
**Source Root (Base Path):** D:\Zahid\Work\Actopod\code\turbo\actopod
---

## Specific Export: apps\frontend\src\pages\dashboard\flows

### `apps\frontend\src\pages\dashboard\flows\[id]\components\canvas\canvas-background.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\edges\animated-edge.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\panels\config-panel\index.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\panels\execution-panel\execution-list-item.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\panels\execution-panel\index.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\panels\pod-library\index.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\panels\pod-library\pod-library-item.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\pod-components\pod-execution-indicator.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\pod-components\pod-handle.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\pod-components\pod-header.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\pods\base-pod-node.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\pods\llm-pod-node.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\pods\source-pod-node.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\components\toolbar\save-toolbar.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\context\canvas-context.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\context\models-context.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\hooks\use-executions.ts`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\hooks\use-flow-socket.ts`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\hooks\use-pods.ts`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\index.tsx`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\[id]\types\index.ts`

```typescript
// Error reading file
```

### `apps\frontend\src\pages\dashboard\flows\components\create-flow-dialog.tsx`

```typescript
// File: apps/frontend/src/pages/dashboard/flows/components/create-flow-dialog.tsx
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { useFlows } from '../hooks/use-flows';
import { FlowVisibility } from '../types';

interface CreateFlowDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
}

export function CreateFlowDialog({ open, onOpenChange }: CreateFlowDialogProps) {
  const navigate = useNavigate();
  const { createFlow } = useFlows();
  const [isLoading, setIsLoading] = useState(false);
  const [formData, setFormData] = useState({
    name: '',
    description: '',
    visibility: FlowVisibility.PRIVATE,
  });

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!formData.name.trim()) {
      return; // âœ… Guard clause
    }

    setIsLoading(true);

    try {
      const flow = await createFlow(formData);

      if (flow) {
        onOpenChange(false);
        setFormData({ name: '', description: '', visibility: FlowVisibility.PRIVATE });
        navigate(`/dashboard/flows/${flow.id}`);
      }
    } catch (error) {
      console.error('Failed to create flow:', error);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent
        className="sm:max-w-[500px]"
        onPointerDownOutside={(e) => {
          // âœ… Prevent closing when clicking outside
          if (isLoading) e.preventDefault();
        }}
      >
        <form onSubmit={handleSubmit}>
          <DialogHeader>
            <DialogTitle>Create New Flow</DialogTitle>
            <DialogDescription>Create a new AI workflow canvas to start building</DialogDescription>
          </DialogHeader>

          <div className="space-y-4 py-4">
            <div className="space-y-2">
              <Label htmlFor="name">Name *</Label>
              <Input
                id="name"
                placeholder="My AI Workflow"
                value={formData.name}
                onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                disabled={isLoading}
                required
                autoFocus
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="description">Description</Label>
              <Textarea
                id="description"
                placeholder="Describe what this workflow does..."
                value={formData.description}
                onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                disabled={isLoading}
                rows={3}
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="visibility">Visibility</Label>
              <Select
                value={formData.visibility}
                onValueChange={(value) =>
                  setFormData({ ...formData, visibility: value as FlowVisibility })
                }
                disabled={isLoading}
              >
                <SelectTrigger id="visibility">
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value={FlowVisibility.PRIVATE}>Private</SelectItem>
                  <SelectItem value={FlowVisibility.WORKSPACE}>Workspace</SelectItem>
                  <SelectItem value={FlowVisibility.PUBLIC}>Public</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>

          <DialogFooter>
            <Button
              type="button"
              variant="outline"
              onClick={() => onOpenChange(false)}
              disabled={isLoading}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isLoading || !formData.name.trim()}>
              {isLoading ? 'Creating...' : 'Create Flow'}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
}

```

### `apps\frontend\src\pages\dashboard\flows\hooks\use-flow.ts`

```typescript
import { useState, useEffect, useCallback } from 'react';
import { axiosInstance } from '@/lib/axios-instance';
import { toast } from '@/lib/toast-utils';
import { useWorkspaces } from '@/hooks/use-workspaces';
import { Flow, ApiResponse } from '../types';

export function useFlow(flowId: string | undefined) {
  const { currentWorkspace } = useWorkspaces();
  const [flow, setFlow] = useState<Flow | null>(null);
  const [isLoading, setIsLoading] = useState(false);

  const fetchFlow = useCallback(async () => {
    if (!currentWorkspace?.id || !flowId) return;

    try {
      setIsLoading(true);
      const response = await axiosInstance.get<ApiResponse<Flow>>(
        `/workspaces/${currentWorkspace.id}/flows/${flowId}`
      );

      setFlow(response.data.data);
    } catch (error) {
      console.error('Failed to fetch flow:', error);
      toast.error('Failed to load flow');
    } finally {
      setIsLoading(false);
    }
  }, [currentWorkspace?.id, flowId]);

  useEffect(() => {
    fetchFlow();
  }, [fetchFlow]);

  return {
    flow,
    isLoading,
    refetch: fetchFlow,
  };
}

```

### `apps\frontend\src\pages\dashboard\flows\hooks\use-flows.ts`

```typescript
import { useState, useEffect, useCallback } from 'react';
import { axiosInstance } from '@/lib/axios-instance';
import { toast } from '@/lib/toast-utils';
import { useWorkspaces } from '@/hooks/use-workspaces';
import { Flow, FlowVisibility } from '../types';

interface UseFlowsOptions {
  page?: number;
  limit?: number;
  search?: string;
  visibility?: FlowVisibility;
  spaceId?: string;
}

// âœ… Match your backend's interceptor structure
interface BackendResponse<T> {
  statusCode: number;
  message: string;
  data: T;
  errors?: string[];
  timestamp: string;
  pagination?: {
    totalItems: number;
    totalPages: number;
    currentPage: number;
    pageSize: number;
  };
}

export function useFlows(options: UseFlowsOptions = {}) {
  const { currentWorkspace } = useWorkspaces();
  const [flows, setFlows] = useState<Flow[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [pagination, setPagination] = useState({
    totalItems: 0,
    totalPages: 0,
    currentPage: 1,
    pageSize: 0,
  });

  const fetchFlows = useCallback(async () => {
    if (!currentWorkspace?.id) return;

    try {
      setIsLoading(true);
      const response = await axiosInstance.get<BackendResponse<Flow[]>>(
        `/workspaces/${currentWorkspace.id}/flows`,
        {
          params: {
            page: options.page || 1,
            limit: options.limit || 20,
            search: options.search,
            visibility: options.visibility,
            spaceId: options.spaceId,
          },
        }
      );

      // âœ… Your interceptor returns: { statusCode, message, data: [], pagination: {}, errors, timestamp }
      setFlows(response.data.data || []);
      setPagination(
        response.data.pagination || {
          totalItems: 0,
          totalPages: 0,
          currentPage: 1,
          pageSize: 0,
        }
      );
    } catch (error) {
      console.error('Failed to fetch flows:', error);
      toast.error('Failed to load flows');
      setFlows([]);
    } finally {
      setIsLoading(false);
    }
  }, [
    currentWorkspace?.id,
    options.page,
    options.limit,
    options.search,
    options.visibility,
    options.spaceId,
  ]);

  useEffect(() => {
    fetchFlows();
  }, [fetchFlows]);

  const createFlow = useCallback(
    async (data: {
      name: string;
      description?: string;
      visibility?: FlowVisibility;
      spaceId?: string;
    }) => {
      if (!currentWorkspace?.id) return null;

      try {
        const response = await axiosInstance.post<BackendResponse<Flow>>(
          `/workspaces/${currentWorkspace.id}/flows`,
          data
        );

        const newFlow = response.data.data;
        setFlows((prev) => [newFlow, ...prev]);
        toast.success('Flow created successfully');
        return newFlow;
      } catch (error) {
        console.error('Failed to create flow:', error);
        toast.error('Failed to create flow');
        return null;
      }
    },
    [currentWorkspace?.id]
  );

  const updateFlow = useCallback(
    async (
      flowId: string,
      data: { name?: string; description?: string; visibility?: FlowVisibility; spaceId?: string }
    ) => {
      if (!currentWorkspace?.id) return null;

      try {
        const response = await axiosInstance.patch<BackendResponse<Flow>>(
          `/workspaces/${currentWorkspace.id}/flows/${flowId}`,
          data
        );

        const updatedFlow = response.data.data;
        setFlows((prev) => prev.map((f) => (f.id === flowId ? updatedFlow : f)));
        toast.success('Flow updated successfully');
        return updatedFlow;
      } catch (error) {
        console.error('Failed to update flow:', error);
        toast.error('Failed to update flow');
        return null;
      }
    },
    [currentWorkspace?.id]
  );

  const deleteFlow = useCallback(
    async (flowId: string) => {
      if (!currentWorkspace?.id) return false;

      try {
        await axiosInstance.delete(`/workspaces/${currentWorkspace.id}/flows/${flowId}`);
        setFlows((prev) => prev.filter((f) => f.id !== flowId));
        toast.success('Flow deleted successfully');
        return true;
      } catch (error) {
        console.error('Failed to delete flow:', error);
        toast.error('Failed to delete flow');
        return false;
      }
    },
    [currentWorkspace?.id]
  );

  return {
    flows,
    isLoading,
    pagination,
    fetchFlows,
    createFlow,
    updateFlow,
    deleteFlow,
  };
}

```

### `apps\frontend\src\pages\dashboard\flows\index.tsx`

```typescript
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { Skeleton } from '@/components/ui/skeleton';
import {
  Plus,
  Search,
  MoreVertical,
  Edit,
  Trash2,
  Copy,
  Eye,
  Users,
  Grid3x3,
  Workflow,
} from 'lucide-react';
import { formatDistanceToNow } from 'date-fns';
import { useFlows } from './hooks/use-flows';
import { CreateFlowDialog } from './components/create-flow-dialog';

export default function FlowsPage() {
  const navigate = useNavigate();
  const [search, setSearch] = useState('');
  const [createDialogOpen, setCreateDialogOpen] = useState(false);
  const { flows, isLoading, deleteFlow } = useFlows({ search });

  const handleDeleteFlow = async (flowId: string) => {
    if (confirm('Are you sure you want to delete this flow? This action cannot be undone.')) {
      await deleteFlow(flowId);
    }
  };

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold tracking-tight">Flows</h1>
          <p className="text-muted-foreground">Create and manage AI-powered workflows</p>
        </div>
        <Button onClick={() => setCreateDialogOpen(true)}>
          <Plus className="mr-2 h-4 w-4" />
          New Flow
        </Button>
      </div>

      {/* Search Bar */}
      <div className="flex items-center gap-4">
        <div className="relative flex-1">
          <Search className="text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2" />
          <Input
            placeholder="Search flows..."
            value={search}
            onChange={(e) => setSearch(e.target.value)}
            className="pl-9"
          />
        </div>
      </div>

      {/* Flows Grid */}
      {isLoading ? (
        <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
          {Array.from({ length: 6 }).map((_, i) => (
            <Card key={i}>
              <CardHeader>
                <Skeleton className="h-4 w-3/4" />
                <Skeleton className="h-3 w-full" />
              </CardHeader>
              <CardContent>
                <Skeleton className="h-20 w-full" />
              </CardContent>
            </Card>
          ))}
        </div>
      ) : flows.length === 0 ? (
        <Card className="flex flex-col items-center justify-center py-12">
          <Workflow className="text-muted-foreground mb-4 h-12 w-12" />
          <h3 className="mb-2 text-lg font-semibold">No flows yet</h3>
          <p className="text-muted-foreground mb-4 text-center text-sm">
            Create your first AI workflow to get started
          </p>
          <Button onClick={() => setCreateDialogOpen(true)}>
            <Plus className="mr-2 h-4 w-4" />
            Create Flow
          </Button>
        </Card>
      ) : (
        <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
          {flows.map((flow) => (
            <Card
              key={flow.id}
              className="group cursor-pointer transition-all hover:shadow-lg"
              onClick={() => navigate(`/dashboard/flows/${flow.id}`)}
            >
              <CardHeader>
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <CardTitle className="line-clamp-1">{flow.name}</CardTitle>
                    <CardDescription className="line-clamp-2">
                      {flow.description || 'No description'}
                    </CardDescription>
                  </div>
                  <DropdownMenu>
                    <DropdownMenuTrigger asChild onClick={(e) => e.stopPropagation()}>
                      <Button
                        variant="ghost"
                        size="icon"
                        className="opacity-0 group-hover:opacity-100"
                      >
                        <MoreVertical className="h-4 w-4" />
                      </Button>
                    </DropdownMenuTrigger>
                    <DropdownMenuContent align="end">
                      <DropdownMenuItem
                        onClick={(e) => {
                          e.stopPropagation();
                          navigate(`/dashboard/flows/${flow.id}`);
                        }}
                      >
                        <Edit className="mr-2 h-4 w-4" />
                        Edit
                      </DropdownMenuItem>
                      <DropdownMenuItem onClick={(e) => e.stopPropagation()}>
                        <Copy className="mr-2 h-4 w-4" />
                        Duplicate
                      </DropdownMenuItem>
                      <DropdownMenuSeparator />
                      <DropdownMenuItem
                        className="text-destructive"
                        onClick={(e) => {
                          e.stopPropagation();
                          handleDeleteFlow(flow.id);
                        }}
                      >
                        <Trash2 className="mr-2 h-4 w-4" />
                        Delete
                      </DropdownMenuItem>
                    </DropdownMenuContent>
                  </DropdownMenu>
                </div>
              </CardHeader>
              <CardContent>
                <div className="text-muted-foreground flex items-center gap-4 text-sm">
                  <div className="flex items-center gap-1">
                    <Grid3x3 className="h-4 w-4" />
                    <span>{flow.podCount || 0} pods</span>
                  </div>
                  <div className="flex items-center gap-1">
                    <Users className="h-4 w-4" />
                    <span>{flow.collaboratorCount || 0}</span>
                  </div>
                </div>
              </CardContent>
              <CardFooter className="flex items-center justify-between">
                <Badge variant={flow.visibility === 'PRIVATE' ? 'secondary' : 'default'}>
                  <Eye className="mr-1 h-3 w-3" />
                  {flow.visibility}
                </Badge>
                <span className="text-muted-foreground text-xs">
                  {formatDistanceToNow(new Date(flow.updatedAt), { addSuffix: true })}
                </span>
              </CardFooter>
            </Card>
          ))}
        </div>
      )}

      <CreateFlowDialog open={createDialogOpen} onOpenChange={setCreateDialogOpen} />
    </div>
  );
}

```

### `apps\frontend\src\pages\dashboard\flows\types\index.ts`

```typescript
export enum FlowVisibility {
  PRIVATE = 'PRIVATE',
  WORKSPACE = 'WORKSPACE',
  PUBLIC = 'PUBLIC',
}

export interface Flow {
  id: string;
  workspaceId: string;
  spaceId: string | null;
  name: string;
  description: string | null;
  version: number;
  visibility: FlowVisibility;
  createdBy: string;
  thumbnailS3Key: string | null;
  thumbnailGeneratedAt: Date | null;
  createdAt: Date;
  updatedAt: Date;
  podCount?: number;
  collaboratorCount?: number;
}

export interface FlowPagination {
  totalItems: number;
  totalPages: number;
  currentPage: number;
  pageSize: number;
}

export interface FlowsResponse {
  data: Flow[];
  pagination: FlowPagination;
}

// âœ… Backend response wrapper
export interface ApiResponse<T> {
  statusCode: number;
  message: string;
  data: T;
  timestamp: string;
}

```

---

## Export Summary

| Metric | Value |
|--------|-------|
| Files Exported | 26 |
| File Size | 0.02 MB |
| Generated | 2025-10-26 16:17:37 IST |

### What's Included

- All files from 'apps\frontend\src\pages\dashboard\flows'

### Excluded

- node_modules (dependency code)
- Generated Prisma client (packages/schema/client)
- Build artifacts (dist, .turbo, .yarn)

